<div class="container" *ngIf="questions">
  @if(!isStartTest()){
  <div class="instruction">
    <h3>–Ø–∫ –ø–æ—á–∞—Ç–∏ —Å–≤—ñ–π —à–ª—è—Ö –¥–æ –≥–ª–∏–±—à–æ–≥–æ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Å–µ–±–µ</h3>
    <ul>
      <li>1. –ü—Ä–æ–π–¥–∏ –∫–æ—Ä–æ—Ç–∫–∏–π —Ç–µ—Å—Ç ‚Äî —Ü–µ –∑–∞–π–º–µ –ª–∏—à–µ –∫—ñ–ª—å–∫–∞ —Ö–≤–∏–ª–∏–Ω</li>
      <li>
        2. –û–∑–Ω–∞–π–æ–º—Å—è –∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –π –¥—ñ–∑–Ω–∞–π—Å—è –±—ñ–ª—å—à–µ –ø—Ä–æ —Å–≤–æ—ó —Å–∏–ª—å–Ω—ñ —Å—Ç–æ—Ä–æ–Ω–∏
      </li>
      <li>
        3. –ó–∞–ª–∏—à–∏ –∑–∞—è–≤–∫—É –ø—ñ—Å–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ —ñ –æ—Ç—Ä–∏–º–∞–π —É –ø–æ–¥–∞—Ä—É–Ω–æ–∫ –≥–∞–π–¥, —è–∫–∏–π
        –¥–æ–ø–æ–º–æ–∂–µ –∑–Ω–∞–π—Ç–∏ —Å–≤–æ—é –ø–∞—Ä—É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ —Ç–≤–æ–≥–æ —Ç–∏–ø—É –æ—Å–æ–±–∏—Å—Ç–æ—Å—Ç—ñ üéÅ
      </li>
    </ul>
    <br />

    <div style="display: flex; justify-content: center">
      <app-secondary-btn
        [textBtn]="'–ü–æ—á–∞—Ç–∏ —Ç–µ—Å—Ç'"
        (onClick)="startTestOnClick()"
      ></app-secondary-btn>
    </div>
  </div>

  }@else {

  <div class="wrapper">
    <div class="question-quantity">
      {{ questions.length | questionWord }}
    </div>

    <app-refresh-button (refreshTest)="refreshTest()"></app-refresh-button>
    <div class="progress-bar">
      <div
        class="progress-fill"
        [style.background]="colorProgressBar()"
        [style.width.%]="progressPercentage"
      >
        <span class="percentages-text"
          >{{ progressPercentage | number : "1.0-0" }}%</span
        >
      </div>
    </div>
  </div>

  <mat-tab-group [(selectedIndex)]="currentQuestionNumber">
    <form [formGroup]="formGroup">
      <ng-container *ngFor="let q of questions; let i = index">
        <mat-tab [label]="q.id.toString()">
          <div class="shadow-container"></div>
          <div class="question-card">
            <div *ngIf="q">
              <h3 class="question">{{ q.question }}</h3>
              <div class="answers">
                <div class="line"></div>
                <label
                  class="label"
                  *ngFor="let answer of q.answers; let answerIndex = index"
                >
                  <input
                    [formControlName]="q.id.toString()"
                    (click)="
                      forceChangeControl(
                        q.id,
                        answer.point + (answer.type ? '-' + answer.type : '')
                      )
                    "
                    type="radio"
                    [value]="
                      answer.point + (answer.type ? '-' + answer.type : '')
                    "
                  />
                  <div
                    class="button"
                    [class.coloredLabel]="coloredLabel"
                    [ngClass]="
                      'button-' +
                      (q.answers.length - (answerIndex + 1)).toString()
                    "
                  >
                    <span class="edge"></span>
                    <span class="front text"> </span>
                  </div>
                  <span>
                    {{ answer.text }}
                  </span>
                </label>
              </div>
            </div>
          </div>
          <div style="display: flex; justify-content: center">
            <app-secondary-btn
              *ngIf="formGroup.valid"
              [textBtn]="'–†–µ–∑—É–ª—å—Ç–∞—Ç–∏'"
              (onClick)="getSubmit()"
            ></app-secondary-btn>
          </div>
        </mat-tab>
      </ng-container>
    </form>
  </mat-tab-group>
  <div
    class="error-message"
    *ngIf="getInvalidControls()?.length && currentQuestionNumber > 89"
  >
    –ë—É–¥—å –ª–∞—Å–∫–∞, –¥–∞–π—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –≤—Å—ñ –ø–∏—Ç–∞–Ω–Ω—è.
  </div>
  }
</div>
