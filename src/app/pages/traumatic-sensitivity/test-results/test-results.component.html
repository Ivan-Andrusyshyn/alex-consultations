<section class="results">
  <ng-container *ngIf="sensitivityResults$ | async as sensitivityResults">
    <div class="score">
      <div
        *ngFor="let r of possibleVariablesArray; let i = index"
        [class.matchResult]="
          compare(sensitivityResults.results.matchResults, r)
        "
      >
        {{ i + 1 }}. {{ r }}
      </div>
    </div>
    <div class="test-results">
      <h2>{{ sensitivityResults.results.sensitivityType }}</h2>
      <p>Оригінальна градація від 1 до 4:</p>
      <p>
        {{ sensitivityResults.results.originMatchResults }}
      </p>
      <hr />
      <p>Найбільш схожий до 1 з 10:</p>
      <p>{{ sensitivityResults.results.matchResults }}</p>
      <hr />
      <br />
      <h3 class="min-score">
        Найменше балів: {{ sensitivityResults.results.minScoreNumber }}
      </h3>
      <h3 class="max-score">
        Найбільше балів: {{ sensitivityResults.results.maxScoreNumber }}
      </h3>
      <div>
        <ul>
          <li *ngFor="let score of scoresKeys">
            {{ score }}:{{ sensitivityResults.results.scores[score] }}
          </li>
        </ul>
      </div>
    </div>
    <div
      class="score-wrapper"
      *ngIf="sensitivityResults.results.percentages as percentages"
    >
      <app-traumatic-indicator
        [scorePercentages]="percentages"
      ></app-traumatic-indicator>
      <app-send-form-on-email-btn
        *ngIf="!(isShowSendForm$ | async)"
        (sendForm)="toggleSendForm()"
      ></app-send-form-on-email-btn>
      <app-send-results-form
        *ngIf="isShowSendForm$ | async"
        (toggleSendForm)="toggleSendForm()"
        (sendResultsOnEmail)="sendResultsOnEmail($event)"
      ></app-send-results-form>
      <div *ngIf="isShowFormRespMessage$ | async" class="response-message">
        Ми відправили результати тесту на пошту!
      </div>
    </div>
  </ng-container>
</section>
