<section class="results">
  <ng-container *ngIf="userResults$ | async as sensitivityResults">
    <div
      class="score-wrapper"
      *ngIf="sensitivityResults.results.percentages as percentages"
    >
      <p>
        –®–∫–∞–ª–∞ –≤—ñ–¥ 1 –¥–æ 10, –¥–µ 1 –æ–∑–Ω–∞—á–∞—î –Ω–∏–∑—å–∫–∏–π —Ä—ñ–≤–µ–Ω—å —á—É—Ç–ª–∏–≤–æ—Å—Ç—ñ, –∞ 10 ‚Äî –¥—É–∂–µ
        –≤–∏—Å–æ–∫–∏–π —Ä—ñ–≤–µ–Ω—å —á—É—Ç–ª–∏–≤–æ—Å—Ç—ñ.
      </p>
      <div class="title-wrapper">
        <h3>
          {{ sensitivityResults.results.sensitivityType }}
        </h3>
        <div class="score">
          <div
            *ngFor="let r of possibleVariablesArray; let i = index"
            [class.matchResult]="
              compare(sensitivityResults.results.matchResults, r)
            "
          >
            @if (compare(sensitivityResults.results.matchResults, r)) { >
            {{ i + 1 }}.{{ r }}

            }@else {
            {{ i + 1 }}. {{ r }}
            }
          </div>
        </div>

        <div
          class="bg-results"
          [ngStyle]="{
            'background-image':
              'url(assets/svg/tests/traumatic-sensitivity/' +
              sensitivityResults.results.matchResults +
              '.svg)'
          }"
        ></div>
      </div>
      <br />
      <app-traumatic-indicator
        [scorePercentages]="percentages"
      ></app-traumatic-indicator>
      <app-social-links [titleLinks]="'–ù–∞–ø–∏—à–∏ –º–µ–Ω—ñ'"></app-social-links>
    </div>
    <br />
  </ng-container>

  <app-type-information
    [typeInfo]="testResults$ | async"
  ></app-type-information>
  <br />
  <div class="form-container">
    <h3>–ó–∞–ø–∏—à–∏—Å—å –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é –≤–∂–µ –∑–∞—Ä–∞–∑!</h3>
    <br />
    <p>
      –û—Ç—Ä–∏–º–∞–π—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é —Ç–∞ –¥—ñ–∑–Ω–∞–π—Ç–µ—Å—è, —è–∫ –¥–æ—Å—è–≥—Ç–∏ –∫—Ä–∞—â–∏—Ö
      —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤!
    </p>

    <p class="offer">
      üì¢ –õ–∏—à–µ —Ü—å–æ–≥–æ —Ç–∏–∂–Ω—è: 20-—Ö–≤–∏–ª–∏–Ω–Ω–∞ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è!
    </p>
    <app-consultation-form [formGroup]="formGroup"></app-consultation-form>
    <app-secondary-btn
      (onClick)="registration()"
      [textBtn]="'–ó–∞–ø–∏—Å–∞—Ç–∏—Å—è'"
    ></app-secondary-btn>
  </div>
  <br />
  <div class="btns-wrapper">
    <!-- <app-accent-btn
      [textBtn]="'–ó–∞–ø–∏—Å–∞—Ç–∏—Å—è'"
      (onClickBtn)="openDialog()"
      [matColor]="'accent'"
    ></app-accent-btn> -->
    <app-send-form-on-email-btn
      *ngIf="!(isShowSendForm$ | async)"
      (sendForm)="toggleSendForm()"
    ></app-send-form-on-email-btn>
    <app-send-results-form
      *ngIf="isShowSendForm$ | async"
      (toggleSendForm)="toggleSendForm()"
      (sendResultsOnEmail)="sendResultsOnEmail($event)"
    ></app-send-results-form>
  </div>
  <div *ngIf="successMessage()" class="success-message">
    –ú–∏ –≤—ñ–¥–ø—Ä–∞–≤–∏–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É –Ω–∞ –ø–æ—à—Ç—É!
  </div>
  <app-test-list-hero [hideTestsCard]="'traumatic-card'"></app-test-list-hero>
</section>
