<section class="results">
  <ng-container *ngIf="userResults$ | async as sensitivityResults">
    <div
      class="score-wrapper"
      *ngIf="sensitivityResults.results.percentages as percentages"
    >
      <app-traumatic-indicator
        [scorePercentages]="percentages"
      ></app-traumatic-indicator>
    </div>
    <br />
    <div class="title-wrapper">
      <h2>{{ sensitivityResults.results.sensitivityType }}</h2>
      <div class="score">
        <div
          *ngFor="let r of possibleVariablesArray; let i = index"
          [class.matchResult]="
            compare(sensitivityResults.results.matchResults, r)
          "
        >
          @if (compare(sensitivityResults.results.matchResults, r)) { >
          {{ i + 1 }}. {{ r }}

          }@else {

          {{ i + 1 }}. {{ r }}

          }
        </div>
      </div>
    </div>
  </ng-container>
  <app-type-information [typeInfo]="typeInfo$ | async"></app-type-information>
  <app-send-form-on-email-btn
    *ngIf="!(isShowSendForm$ | async)"
    (sendForm)="toggleSendForm()"
  ></app-send-form-on-email-btn>
  <app-send-results-form
    *ngIf="isShowSendForm$ | async"
    (toggleSendForm)="toggleSendForm()"
    (sendResultsOnEmail)="sendResultsOnEmail($event)"
  ></app-send-results-form>
  <div *ngIf="isShowFormRespMessage$ | async" class="response-message">
    Ми відправили результати тесту на пошту!
  </div>
</section>
