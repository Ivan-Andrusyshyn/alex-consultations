<section class="test">
  <div class="score-wrapper" *ngIf="isShowResults$ | async">
    <app-personalities-results></app-personalities-results>

    <app-send-form-on-email-btn
      *ngIf="!(isShowSendForm$ | async)"
      (sendForm)="toggleSendForm()"
    ></app-send-form-on-email-btn>
    <app-send-results-form
      *ngIf="isShowSendForm$ | async"
      (toggleSendForm)="toggleSendForm()"
      (sendResultsOnEmail)="sendResultsOnEmail($event)"
    ></app-send-results-form>
    <div *ngIf="isShowFormRespMessage$ | async" class="response-message">
      Ми відправили результати тесту на пошту!
    </div>
  </div>

  <div
    class="person-info"
    *ngIf="
      (isShowResults$ | async) &&
      (personInformation$ | async) as personInformation
    "
  >
    <app-personalities-type-information
      [personType]="personInformation.personType"
      [personInformation]="personInformation.personInformation"
    ></app-personalities-type-information>
  </div>

  <div class="container" *ngIf="!(isShowResults$ | async)">
    <app-progress-bar
      [currentProgress]="
        parseIntProc((((currentQuestionNumber$ | async) ?? 1) / 90) * 100)
      "
    ></app-progress-bar>
    <app-refresh-button (refreshTest)="refreshTest()"></app-refresh-button>

    <app-questions
      [currentQuestionNumber]="(currentQuestionNumber$ | async) ?? 1"
      (nextQues)="nextQuestion($event)"
      [answers]="answers$ | async"
      (prevQuestion)="previousQuestion()"
    ></app-questions>
  </div>
</section>
